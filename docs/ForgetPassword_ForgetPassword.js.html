<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ForgetPassword/ForgetPassword.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ForgetPassword/ForgetPassword.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint-disable no-multiple-empty-lines */
import React, { useState } from 'react';
import ReCAPTCHA from 'react-google-recaptcha';
import forgetPasswordStyle from './ForgetPassword.module.scss';
import api from '../../api/api';

// eslint-disable-next-line react/function-component-definition
export default function ForgetPassword() {
  const [hideForm, setHideForm] = useState(false);
  const [hideConfirm, setHideConfirm] = useState(true);
  const [hideError, setHideError] = useState(true);
  const [hideEmptyEmail, setHideEmptyEmail] = useState(true);
  const [hideRecaptchaError, setHideRecaptchaError] = useState(true);
  const [recaptcha, setRecaptcha] = useState(false);

  /**
 * @description Send request to send the reset password mail to the user
 * @param {string} email - email of the user
 * @param {string} password - password of the user
*/
  const forgetPassword = async (email) => {
    try {
      // eslint-disable-next-line no-unused-vars
      const response = await api.post('/forgotPassword', {
        email,
      });

      setHideForm(true);
      setHideConfirm(false);
      setHideError(true);
    } catch (err) {
      setHideError(false);
    }
  };

  /**
 * @description Check that the user enter a valid data reseting his password
 * @param {MyEvent} e - The observable event.
 * @listens MyEvent
*/
  const forgetPasswordHandler = (e) => {
    e.preventDefault();
    if (e.target.email &amp;&amp; e.target.email.value !== '') {
      if (recaptcha === false) {
        setHideRecaptchaError(false);
        setHideEmptyEmail(true);
        setHideError(true);
      } else {
        forgetPassword(e.target.email.value);
        setHideEmptyEmail(true);
        setHideRecaptchaError(true);
        setRecaptcha(false);
      }
    } else {
      setHideEmptyEmail(false);
      setHideRecaptchaError(true);
    }
  };

  /**
 * @description When user presses cancel it return back to the login page
 * @param {MyEvent} e - The observable event.
 * @listens MyEvent
*/
  const canceHandler = (e) => {
    e.preventDefault();
    setHideEmptyEmail(true);
    // go to login again
  };

  /**
 * @description When user presses done it return back to the main page
 * @param {MyEvent} e - The observable event.
 * @listens MyEvent
*/
  const doneHandler = (e) => {
    e.preventDefault();
    setHideForm(false);
    setHideConfirm(true);
    // go to the main page
  };

  /**
 * @description when clicking the recaptcha it detect the change
 * @param {MyEvent} e - The observable event.
 * @listens MyEvent
*/
  function onChange(e) {
    e.preventDefault();
    setRecaptcha(!recaptcha);
  }

  return (
    &lt;div data-testid="body" className={forgetPasswordStyle.body}>
      &lt;div data-testid="container" className={forgetPasswordStyle.container}>
        &lt;h2 data-testid="h2">tumblr&lt;/h2>
        {!hideForm
                    &amp;&amp; (
                    &lt;form data-testid="form" onSubmit={forgetPasswordHandler}>

                      &lt;input data-testid="email" type="email" name="email" id="email" placeholder="Email" />

                      {!hideError
                                &amp;&amp; (
                                &lt;p data-testid="error" id="error">There was an error submitting your request.&lt;/p>
                                )}

                      {!hideRecaptchaError
                                &amp;&amp; (
                                &lt;p data-testid="recaptchaError" name="recaptchaError">There was an error submitting your request.&lt;/p>
                                )}

                      {!hideEmptyEmail &amp;&amp; (
                      &lt;p id="error" data-testid="error">Please enter your email address.&lt;/p>
                      )}

                      &lt;div
                        data-testid="recaptcha"
                        className={forgetPasswordStyle.recaptcha}
                      >
                        &lt;ReCAPTCHA
                          sitekey="6Le9C0YdAAAAAK5iSBhKrlLEGV6av3COAi5l8sC6"
                          // eslint-disable-next-line react/jsx-no-bind
                          onChange={onChange}
                        />
                      &lt;/div>

                      &lt;div className={forgetPasswordStyle.buttons}>
                        &lt;button type="button" data-testid="cancel" onClick={canceHandler}> Cancel &lt;/button>
                        &lt;input data-testid="reset" name="reset" type="submit" value="Reset password" />
                      &lt;/div>
                    &lt;/form>
                    )}

        {!hideConfirm
                    &amp;&amp; (
                    &lt;div data-testid="confirmation" id={forgetPasswordStyle.confirmation}>
                      &lt;p>
                        We&amp;apos;ve sent you an email with instructions to reset your password.
                        &lt;br />
                        {' '}
                        &lt;br />
                        Please make sure it didn&amp;apos;t wind up in your Junk Mail.
                        If you aren&amp;apos;t receiving our password reset emails, see our
                        {' '}
                        &lt;a href="#">  help documents&lt;/a>
                        .
                      &lt;/p>
                      &lt;button type="button" onClick={doneHandler}> Done &lt;/button>
                    &lt;/div>
                    )}
      &lt;/div>
    &lt;/div>
  );
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Nov 20 2021 10:23:34 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
